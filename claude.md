# æ—¥æ–‡å­¸ç¿’ Zettelkasten ç³»çµ±

## èªè¨€è¦ç¯„

**æœ¬å°ˆæ¡ˆåš´æ ¼é™åˆ¶ä½¿ç”¨ä»¥ä¸‹ä¸‰ç¨®èªè¨€**ï¼š

1. **æ—¥æ–‡ï¼ˆJapaneseï¼‰** - å¡ç‰‡å…§å®¹ã€ä¾‹å¥ã€æ—¥æ–‡è§£é‡‹
2. **è‹±æ–‡ï¼ˆEnglishï¼‰** - è‹±æ–‡è§£é‡‹ã€åœ‹éš›åŒ–æ”¯æ´
3. **ç¹é«”ä¸­æ–‡ï¼ˆTraditional Chineseï¼‰** - ä¸­æ–‡è§£é‡‹ã€æ–‡æª”ã€è¨»è§£ã€commit è¨Šæ¯

âŒ **åš´æ ¼ç¦æ­¢ä½¿ç”¨ç°¡é«”ä¸­æ–‡ï¼ˆzh-CNï¼‰**

---

## å°ˆæ¡ˆæ¦‚è¿°

çµåˆ AI è¼”åŠ©å’Œ Zettelkasten æ–¹æ³•çš„æ—¥æ–‡å­¸ç¿’ç³»çµ±ã€‚é€éåŸå­åŒ–çš„çŸ¥è­˜å¡ç‰‡ï¼Œå»ºç«‹ç›¸äº’é€£çµçš„çŸ¥è­˜ç¶²çµ¡ã€‚

### æ ¸å¿ƒåŠŸèƒ½

1. **è©å½™å¡ç‰‡ç³»çµ±** - å‹•è©ã€åè©ã€å½¢å®¹è©ç­‰åŸºç¤è©å½™
2. **å»¶ä¼¸å¡ç‰‡ç³»çµ±** - æ–‡æ³•ã€èªç”¨ã€æ–‡åŒ–ç­‰æ¦‚å¿µ
3. **æ¨™æº–é€£çµç³»çµ±** - Markdown `[text](path)` æ ¼å¼
4. **AI ä»£ç†äºº** - è‡ªå‹•åŒ–å¡ç‰‡ç®¡ç†

### ç‰ˆæœ¬ç®¡ç†

ç‰ˆæœ¬æ ¼å¼ï¼š`MAJOR.MINOR.PATCH`
- **MAJOR**ï¼šå°ˆæ¡ˆçµæ§‹æˆ–æ ¸å¿ƒåŠŸèƒ½é‡å¤§è®Šå‹•
- **MINOR**ï¼šæ–°å¢æˆ–ä¿®æ”¹ slash command æˆ–ä»£ç†äºº
- **PATCH**ï¼šå¡ç‰‡å…§å®¹çš„æ–°å¢ã€ä¿®æ”¹æˆ–ä¿®å¾©

---

## å››éšæ®µå·¥ä½œæµç¨‹

æ¯å€‹ PATCH ç‰ˆæœ¬å°æ‡‰ä¸€å€‹å®Œæ•´çš„å››éšæ®µå¾ªç’°ã€‚**æ¯å€‹éšæ®µæœ‰æ˜ç¢ºçš„ä»£ç†äººè²¬ä»»ã€è…³æœ¬å‘½ä»¤å’Œç‹€æ…‹è½‰æ›**ã€‚

### éšæ®µ 1ï¼šContent Creationï¼ˆå…§å®¹å»ºç«‹ï¼‰

**å‰ç½®æ¢ä»¶ï¼ˆå¿…é ˆå®Œæˆï¼‰**ï¼š
1. æª¢è¦–å‰ä¸€ç‰ˆæœ¬çš„å»¶ä¼¸éœ€æ±‚å ±å‘Šï¼š
   - `doc/worklog/extension-cards-{prev}.md`ï¼ˆExtension-Review éšæ®µç”¢å‡ºï¼‰
   - `doc/worklog/linking-cards-{prev}.md`ï¼ˆLinking éšæ®µç”¢å‡ºï¼‰
2. å¾å»¶ä¼¸éœ€æ±‚ä¸­ç¯©é¸ Critical/High å„ªå…ˆç´šå¡ç‰‡
3. å»ºç«‹æœ¬ç‰ˆæœ¬å·¥ä½œæ¸…å–®ï¼š`doc/worklog/worklog-{version}.md`

**çµæ§‹ä»£ç†äºº**ï¼š`card-structure-handler`ï¼ˆ`.claude/agents/card-structure-handler.md`ï¼‰
**å…§å®¹ä»£ç†äºº**ï¼š`build-card-content`ï¼ˆ`.claude/agents/build-card-content.md`ï¼‰

**åŸ·è¡Œå…§å®¹**ï¼š
- card-structure-handler å»ºç«‹å¡ç‰‡æª”æ¡ˆçµæ§‹ï¼ˆYAMLã€æª”åã€åŸºæœ¬å€å¡Šï¼‰
- build-card-content å¡«å……å¡ç‰‡å…§å®¹ï¼ˆä¸‰èªè§£é‡‹ã€ä¾‹å¥ã€ç”¨æ³•ï¼‰
- ä½¿ç”¨ `update-index.py {category}` æ›´æ–°ç´¢å¼•

**ç‹€æ…‹è½‰æ›**ï¼š`pending` â†’ `draft`

**éšæ®µå®Œæˆå‘½ä»¤**ï¼š
```bash
# å¡ç‰‡å…§å®¹å»ºç«‹å®Œæˆå¾Œï¼Œæ›´æ–°ç‚º draft ç‹€æ…‹
uv run scripts/update_card_progress.py --id {card_id} --stage draft --quiet
```

**é‡è¦**ï¼š
- âœ… åŸ·è¡Œ `--stage draft`ï¼ˆæ­£ç¢ºçš„ç‹€æ…‹è½‰æ›ï¼‰
- âŒ ä¸è¦åŸ·è¡Œ `--stage extension-review`ï¼ˆæœƒè·³é draft ç‹€æ…‹ï¼Œå ±éŒ¯ï¼‰
- âŒ ä¸è¦åŸ·è¡Œ `--stage completed`ï¼ˆéšæ®µè·³èºï¼Œå ±éŒ¯ï¼‰

**ä¸¦ç™¼åŸ·è¡Œæ”¯æ´ï¼ˆv1.0.6+ï¼‰**ï¼š
- âœ… `get-next-number.py` å·²æ”¯æ´ä¸¦ç™¼ï¼ˆä½¿ç”¨æª”æ¡ˆé–æ©Ÿåˆ¶ï¼‰
- âœ… æ¨è–¦ä½¿ç”¨ `allocate_card_numbers.py` é å…ˆåˆ†é…ç·¨è™Ÿ
- âœ… ä»£ç†äººå„ªå…ˆä½¿ç”¨ `allocated_number` æ¬„ä½
- âœ… æ”¯æ´å¹³è¡ŒåŸ·è¡Œå¤šå€‹ card-structure-handler å’Œ build-card-content ä»£ç†äºº

---

### éšæ®µ 2ï¼šExtension Reviewï¼ˆå»¶ä¼¸éœ€æ±‚å¯©æŸ¥ï¼‰

**ä»£ç†äºº**ï¼š`create-extension-cards`ï¼ˆ`.claude/agents/create-extension-cards.md`ï¼‰

**åŸ·è¡Œå…§å®¹**ï¼š
- æª¢æŸ¥ draft ç‹€æ…‹çš„å¡ç‰‡
- è­˜åˆ¥éœ€è¦å»¶ä¼¸çš„æ–°å¡ç‰‡ï¼ˆç›¸é—œæ¦‚å¿µã€å°æ¯”é …ã€å‰ç½®çŸ¥è­˜ï¼‰
- è¨˜éŒ„åˆ° `doc/worklog/extension-cards-{version}.md`

**ç‹€æ…‹è½‰æ›**ï¼š`draft` â†’ `extension-review`

**éšæ®µå®Œæˆå‘½ä»¤**ï¼š
```bash
# Extension Review å®Œæˆå¾Œï¼Œæ›´æ–°ç‚º extension-review ç‹€æ…‹
uv run scripts/update_card_progress.py --id {card_id} --stage extension-review --quiet
```

**ç”¢å‡º**ï¼š
- å»¶ä¼¸éœ€æ±‚å ±å‘Šï¼š`doc/worklog/extension-cards-{version}.md`
- æ–°å¡ç‰‡éœ€æ±‚ï¼ˆä¾›ä¸‹ä¸€ç‰ˆæœ¬ä½¿ç”¨ï¼‰

---

### éšæ®µ 3ï¼šLink Buildingï¼ˆé€£çµå»ºç«‹ï¼‰

**ä»£ç†äºº**ï¼š`build-card-links`ï¼ˆ`.claude/agents/build-card-links.md`ï¼‰

**åŸ·è¡Œå…§å®¹**ï¼š
- æª¢æŸ¥ extension-review ç‹€æ…‹çš„å¡ç‰‡
- è£œå……æ¨™æº–é€£çµï¼ˆå°‡ã€Œå¾…å»ºç«‹ã€æ¨™è¨˜æ›¿æ›ç‚ºå¯¦éš›è·¯å¾‘ï¼‰
- æ·»åŠ è…³è¨»èªªæ˜
- å»ºç«‹é›™å‘é€£çµ

**ç‹€æ…‹è½‰æ›**ï¼š`extension-review` â†’ `linking`

**éšæ®µå®Œæˆå‘½ä»¤**ï¼š
```bash
# Link Building å®Œæˆå¾Œï¼Œæ›´æ–°ç‚º linking ç‹€æ…‹
uv run scripts/update_card_progress.py --id {card_id} --stage linking --quiet
```

**ç”¢å‡º**ï¼š
- é€£çµéšæ®µå ±å‘Šï¼š`doc/worklog/linking-cards-{version}.md`
- è‰ç¨¿å¡ç‰‡ï¼ˆé€£çµæ™‚ç™¼ç¾çš„ç¼ºå£ï¼‰

---

### éšæ®µ 4ï¼šFinal Verificationï¼ˆæœ€çµ‚é©—è­‰ï¼‰

**ä»£ç†äºº**ï¼š`diagram-designer`ï¼ˆ`.claude/agents/diagram-designer.md`ï¼‰- å¯é¸

**åŸ·è¡Œå…§å®¹**ï¼š
- åŸ·è¡Œç³»çµ±é©—è­‰è…³æœ¬
- æª¢æŸ¥ç·¨è™Ÿé€£çºŒæ€§
- æª¢æŸ¥é€£çµæ ¼å¼
- **åœ–è¡¨å¯©æŸ¥**ï¼ˆå¯é¸ï¼Œç”±ä»£ç†äººåˆ¤æ–·ï¼‰
- æ›´æ–° CHANGELOG.md

**ç‹€æ…‹è½‰æ›**ï¼š`linking` â†’ `completed`

**é©—è­‰èˆ‡ä¿®å¾©å‘½ä»¤**ï¼š

```bash
# ç¬¬ 1 æ­¥ï¼šæª¢æŸ¥å•é¡Œ
uv run scripts/fix-numbering.py --check
uv run scripts/fix-wikilinks.py --check
uv run scripts/verify-meta.py --verbose

# ç¬¬ 2 æ­¥ï¼šè‡ªå‹•ä¿®å¾©ï¼ˆå¦‚æœ‰å•é¡Œï¼‰
uv run scripts/fix-numbering.py --fix
uv run scripts/fix-wikilinks.py --fix

# ç¬¬ 3 æ­¥ï¼šé©—è­‰ä¿®å¾©çµæœ
uv run scripts/fix-numbering.py --check
uv run scripts/fix-wikilinks.py --verify

# ç¬¬ 4 æ­¥ï¼šæŸ¥çœ‹å®Œæˆçµ±è¨ˆ
uv run scripts/manage_worklog_cards.py stats
```

**æ³¨æ„**ï¼š
- ç·¨è™Ÿå’Œé€£çµå•é¡Œæœƒè‡ªå‹•ä¿®å¾©
- Meta ç¼ºå£åƒ…æª¢æŸ¥ï¼Œè¨˜éŒ„åˆ°å»¶ä¼¸éœ€æ±‚å ±å‘Šä¾›ä¸‹ä¸€ç‰ˆæœ¬è™•ç†

**åœ–è¡¨å¯©æŸ¥ï¼ˆå¯é¸ï¼‰**ï¼š

ä½¿ç”¨ `diagram-designer` ä»£ç†äººå¯©æŸ¥æœ¬ç‰ˆæœ¬æ–°å¢çš„å¡ç‰‡ï¼Œè©•ä¼°æ˜¯å¦éœ€è¦æ–°å¢è¦–è¦ºåŒ–åœ–è¡¨ï¼š

```
è«‹å¯©æŸ¥ {category} åˆ†é¡çš„å¡ç‰‡ï¼Œè©•ä¼°æ˜¯å¦éœ€è¦åœ–è¡¨
```

**æ³¨æ„**ï¼š
- åœ–è¡¨å¯©æŸ¥æ˜¯**éå¿…è¦**æ­¥é©Ÿï¼Œç”±ä»£ç†äººè‡ªè¡Œåˆ¤æ–·
- é©åˆåŠ å…¥åœ–è¡¨çš„æƒ…æ³ï¼šå¤šé¸é …åˆ¤æ–·ã€ç‹€æ…‹è®ŠåŒ–ã€äººéš›äº’å‹•ã€åˆ†é¡å±¤ç´š
- ä¸éœ€è¦åœ–è¡¨çš„æƒ…æ³ï¼šå–®ä¸€è©å½™ã€ç°¡å–®æ‰“æ‹›å‘¼ç”¨èª
- è©³ç´°è¨­è¨ˆåŸå‰‡è«‹åƒè€ƒï¼š`.claude/diagram-guidelines.md`

**éšæ®µå®Œæˆå‘½ä»¤**ï¼š
```bash
# é©—è­‰é€šéå¾Œï¼Œæ›´æ–°ç‚º completed ç‹€æ…‹
uv run scripts/update_card_progress.py --id {card_id} --stage completed --quiet
```

**å®Œæˆæ¢ä»¶**ï¼š
- âœ… æ‰€æœ‰å¡ç‰‡ç‹€æ…‹ç‚º `completed`
- âœ… ç·¨è™Ÿé€£çºŒç„¡è¡çªï¼ˆè‡ªå‹•ä¿®å¾©å¾Œé©—è­‰ï¼‰
- âœ… é€£çµæ ¼å¼æ­£ç¢ºï¼ˆè‡ªå‹•ä¿®å¾©å¾Œé©—è­‰ï¼‰
- âšª Meta ç³»çµ±é©—è­‰ï¼ˆåƒ…æª¢æŸ¥ï¼Œç¼ºå£è¨˜éŒ„åˆ°ä¸‹ä¸€ç‰ˆæœ¬ï¼‰
- âšª åœ–è¡¨å¯©æŸ¥å®Œæˆï¼ˆå¯é¸ï¼‰

**æœ€å¾Œå‹•ä½œ**ï¼š
- æ›´æ–° CHANGELOG.md
- åˆä½µåˆ° main åˆ†æ”¯

---

## éšæ®µè½‰æ›æµç¨‹åœ–

æ¯å¼µå¡ç‰‡çš„å®Œæ•´ç”Ÿå‘½é€±æœŸåŒ…å«**äº”å€‹ç‹€æ…‹**å’Œ**å››å€‹å·¥ä½œéšæ®µ**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¡ç‰‡ç”Ÿå‘½é€±æœŸï¼šäº”å€‹ç‹€æ…‹ Ã— å››å€‹éšæ®µ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â‘  pendingï¼ˆå¾…è™•ç†ï¼‰                                             â”‚
â”‚     â†“                                                           â”‚
â”‚     â”‚ ã€éšæ®µ 1: Content Creationã€‘                              â”‚
â”‚     â”‚ [card-structure-handler + build-card-content ä»£ç†äºº]      â”‚
â”‚     â”‚ å‘½ä»¤ï¼šuv run scripts/update_card_progress.py             â”‚
â”‚     â”‚       --id {card_id} --stage draft                       â”‚
â”‚     â†“                                                           â”‚
â”‚  â‘¡ draftï¼ˆå…§å®¹å·²å»ºç«‹ï¼‰                                           â”‚
â”‚     â†“                                                           â”‚
â”‚     â”‚ ã€éšæ®µ 2: Extension Reviewã€‘                              â”‚
â”‚     â”‚ [create-extension-cards ä»£ç†äººæª¢æŸ¥å»¶ä¼¸éœ€æ±‚]               â”‚
â”‚     â”‚ å‘½ä»¤ï¼šuv run scripts/update_card_progress.py             â”‚
â”‚     â”‚       --id {card_id} --stage extension-review            â”‚
â”‚     â†“                                                           â”‚
â”‚  â‘¢ extension-reviewï¼ˆå»¶ä¼¸éœ€æ±‚å·²å¯©æŸ¥ï¼‰                            â”‚
â”‚     â†“                                                           â”‚
â”‚     â”‚ ã€éšæ®µ 3: Link Buildingã€‘                                 â”‚
â”‚     â”‚ [build-card-links ä»£ç†äººå»ºç«‹é€£çµ]                         â”‚
â”‚     â”‚ å‘½ä»¤ï¼šuv run scripts/update_card_progress.py             â”‚
â”‚     â”‚       --id {card_id} --stage linking                     â”‚
â”‚     â†“                                                           â”‚
â”‚  â‘£ linkingï¼ˆé€£çµå·²å»ºç«‹ï¼‰                                         â”‚
â”‚     â†“                                                           â”‚
â”‚     â”‚ ã€éšæ®µ 4: Final Verificationã€‘                            â”‚
â”‚     â”‚ [äººå·¥é©—è­‰ + diagram-designer ä»£ç†äººï¼ˆå¯é¸ï¼‰]              â”‚
â”‚     â”‚ å‘½ä»¤ï¼šuv run scripts/update_card_progress.py             â”‚
â”‚     â”‚       --id {card_id} --stage completed                   â”‚
â”‚     â†“                                                           â”‚
â”‚  â‘¤ completedï¼ˆå·²å®Œæˆï¼‰                                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¦æ­¢çš„ç‹€æ…‹è·³èº**ï¼ˆæœƒå°è‡´ Exit code 1ï¼‰ï¼š
- âŒ `pending â†’ extension-review`ï¼ˆè·³é draftï¼‰
- âŒ `pending â†’ linking`ï¼ˆè·³é draft å’Œ extension-reviewï¼‰
- âŒ `pending â†’ completed`ï¼ˆè·³éæ‰€æœ‰ä¸­é–“ç‹€æ…‹ï¼‰
- âŒ `draft â†’ linking`ï¼ˆè·³é extension-reviewï¼‰
- âŒ `draft â†’ completed`ï¼ˆè·³é extension-review å’Œ linkingï¼‰
- âŒ `extension-review â†’ completed`ï¼ˆè·³é linkingï¼‰

**å…è¨±çš„ç‹€æ…‹è½‰æ›**ï¼ˆåš´æ ¼éµå®ˆï¼‰ï¼š
- âœ… `pending â†’ draft`ï¼ˆéšæ®µ 1 å®Œæˆï¼‰
- âœ… `draft â†’ extension-review`ï¼ˆéšæ®µ 2 å®Œæˆï¼‰
- âœ… `extension-review â†’ linking`ï¼ˆéšæ®µ 3 å®Œæˆï¼‰
- âœ… `linking â†’ completed`ï¼ˆéšæ®µ 4 å®Œæˆï¼‰

**å›é€€è½‰æ›**ï¼ˆå…è¨±ä½†ä¸æ¨è–¦ï¼‰ï¼š
- ğŸ”„ `draft â†’ pending`ï¼ˆé‡æ–°é–‹å§‹ï¼‰
- ğŸ”„ `extension-review â†’ draft`ï¼ˆå›åˆ°ä¸Šä¸€éšæ®µï¼‰
- ğŸ”„ `linking â†’ extension-review`ï¼ˆå›åˆ°ä¸Šä¸€éšæ®µï¼‰

---

## ç‰ˆæœ¬å¾ªç’°ä¾è³´é—œä¿‚

æ¯å€‹ç‰ˆæœ¬çš„ Draft éšæ®µå¿…é ˆå¾å‰ä¸€ç‰ˆæœ¬çš„å»¶ä¼¸éœ€æ±‚å ±å‘Šé–‹å§‹ï¼Œå½¢æˆé€£çºŒçš„ç‰ˆæœ¬å¾ªç’°ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ v1.0.4                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Draftï¼ˆ36 å¼µå¡ç‰‡ï¼‰                               â”‚
â”‚   â†“                                             â”‚
â”‚ Extension-Review                                â”‚
â”‚   â””â†’ ç”¢å‡ºï¼šextension-cards-1.0.4.mdï¼ˆ120 å¼µï¼‰   â”‚
â”‚   â†“                                             â”‚
â”‚ Linking                                         â”‚
â”‚   â””â†’ ç”¢å‡ºï¼šlinking-cards-1.0.4.mdï¼ˆ15 å¼µï¼‰      â”‚
â”‚   â†“                                             â”‚
â”‚ Completed                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ï¼ˆç‰ˆæœ¬ä¾è³´ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ v1.0.6                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ **éšæ®µ 1 å‰ç½®ï¼šç‰ˆæœ¬è¦åŠƒ**                        â”‚
â”‚   â”œâ†’ è®€å– extension-cards-1.0.4.md              â”‚
â”‚   â”œâ†’ è®€å– linking-cards-1.0.4.md                â”‚
â”‚   â”œâ†’ ç¯©é¸ Critical/Highï¼ˆ60 å¼µï¼‰                â”‚
â”‚   â””â†’ å»ºç«‹ worklog-1.0.6.md                      â”‚
â”‚   â†“                                             â”‚
â”‚ Draftï¼ˆ60 å¼µå¡ç‰‡ï¼‰                               â”‚
â”‚   â†“                                             â”‚
â”‚ Extension-Review                                â”‚
â”‚   â””â†’ ç”¢å‡ºï¼šextension-cards-1.0.6.mdï¼ˆæ–°éœ€æ±‚ï¼‰   â”‚
â”‚   â†“                                             â”‚
â”‚ Linking                                         â”‚
â”‚   â””â†’ ç”¢å‡ºï¼šlinking-cards-1.0.6.mdï¼ˆæ–°éœ€æ±‚ï¼‰     â”‚
â”‚   â†“                                             â”‚
â”‚ Completed                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ï¼ˆç¹¼çºŒå¾ªç’°ï¼‰
         v1.0.7...
```

**é—œéµè¦å‰‡**ï¼š
- æ¯å€‹ç‰ˆæœ¬çš„ Draft éšæ®µå¿…é ˆå¾å‰ä¸€ç‰ˆæœ¬çš„å»¶ä¼¸éœ€æ±‚å ±å‘Šé–‹å§‹
- Extension-Review å’Œ Linking ç”¢å‡ºçš„å ±å‘Šæ˜¯ç‰ˆæœ¬é–“çš„æ©‹æ¨‘
- ä¸å¯è·³éç‰ˆæœ¬ä¾è³´æª¢æŸ¥ï¼Œé€™æ˜¯ç‰ˆæœ¬å¾ªç’°çš„æ ¸å¿ƒæµç¨‹

---

## åŸ·è¡Œæ–¹å¼æ ¸å¿ƒåŸå‰‡

### âœ… å¿…é ˆåš

1. **æ¯å¼µå¡ç‰‡ = ä¸€å€‹ Todo**
   - 40 å¼µå¡ç‰‡ â†’ å»ºç«‹ 40 å€‹ todo
   - æ¯å€‹ todo åªè™•ç†ä¸€å¼µå¡ç‰‡

2. **å¹³è¡Œè™•ç†**
   - ä½¿ç”¨ Task å·¥å…·åŒæ™‚å•Ÿå‹•å¤šå€‹ä»£ç†äºº
   - ä¸€æ¬¡ç™¼é€å¤šå€‹ Task å‘¼å«

3. **æ‰€æœ‰å¡ç‰‡åŒç­‰é‡è¦**
   - ä¸å€åˆ†å„ªå…ˆç´š
   - å…¨éƒ¨å®Œæˆï¼Œä¸æ‹–å»¶

### âŒ ä¸å¯åš

1. ä¸€å€‹ todo åŒ…å«å¤šå¼µå¡ç‰‡
2. åˆ†æ‰¹è™•ç†æˆ–æŒ‰å„ªå…ˆç´šè™•ç†
3. ä½¿ç”¨è…³æœ¬æ‰¹æ¬¡è™•ç†å¡ç‰‡å…§å®¹
4. è©•ä¼°å·¥æ™‚æˆ–å»¶å¾Œè™•ç†

### è©³ç´°åŸ·è¡ŒæŒ‡å—

åƒè€ƒï¼š`doc/execution-workflow.md`

### ä»£ç†äººå›å ±è¦ç¯„

**éœé»˜æˆåŠŸåŸå‰‡**ï¼š
- âœ… æˆåŠŸï¼š**å®Œå…¨ä¸è¼¸å‡ºä»»ä½•æ–‡å­—**ï¼ˆä¸è¦èªªã€Œå®Œæˆã€ã€ŒæˆåŠŸã€ã€Œå·²å»ºç«‹ã€ç­‰ï¼‰
- âŒ å¤±æ•—ï¼šåªè¼¸å‡ºéŒ¯èª¤æ ¼å¼ï¼š`âŒ {id} {path} å¤±æ•—\nåŸå› ï¼š{èªªæ˜}`
- é€²åº¦è¿½è¹¤å®Œå…¨ä¾è³´ CSV å’Œé©—è­‰è…³æœ¬
- ä¸»ç·šç¨‹åªéœ€è™•ç†å¤±æ•—æ¡ˆä¾‹

**æ¨™æº– Prompt æ¨¡æ¿**ï¼š`.claude/templates/task-prompt-silent.md`

**é•è¦è¡Œç‚º**ï¼š
- è¼¸å‡ºã€Œä»»å‹™å®Œæˆã€ã€ŒæˆåŠŸå»ºç«‹ã€ç­‰ç¢ºèªè¨Šæ¯
- è¼¸å‡ºè©³ç´°çš„å¡ç‰‡å…§å®¹æ‘˜è¦
- è¼¸å‡ºçµ±è¨ˆè³‡è¨Šï¼ˆå­—æ•¸ã€ä¾‹å¥æ•¸ç­‰ï¼‰

**åŸå› **ï¼šé•è¦è¼¸å‡ºæœƒä½”ç”¨ä¸»ç·šç¨‹ contextï¼Œé™ä½ä¸¦è¡Œæ•ˆç‡ã€‚

---

## ç›®éŒ„çµæ§‹

```
japanese_learning_blog/
â”œâ”€â”€ CLAUDE.md                 # AI ä»£ç†äººæŒ‡å—ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ README.md                 # å°ˆæ¡ˆç°¡ä»‹ï¼ˆçµ¦ä½¿ç”¨è€…ï¼‰
â”œâ”€â”€ CHANGELOG.md              # ç‰ˆæœ¬è®Šæ›´ç´€éŒ„
â”‚
â”œâ”€â”€ .claude/                  # Claude Code é…ç½®
â”‚   â”œâ”€â”€ agents/               # å·¥ä½œæµç¨‹ä»£ç†äººå®šç¾©
â”‚   â”œâ”€â”€ commands/             # Slash Commands å®šç¾©
â”‚   â”œâ”€â”€ templates/            # å¡ç‰‡æ¨¡æ¿
â”‚   â””â”€â”€ *.md                  # æ ¼å¼è¦ç¯„ã€æª¢æŸ¥æ¸…å–®
â”‚
â”œâ”€â”€ doc/                      # å°ˆæ¡ˆæ–‡æª”
â”‚   â”œâ”€â”€ worklog/              # ç‰ˆæœ¬å·¥ä½œæ—¥èªŒèˆ‡é€²åº¦è¿½è¹¤
â”‚   â”œâ”€â”€ specs/                # ç‰ˆæœ¬è¦æ ¼æ–‡æª”ï¼ˆv1.0.7+ï¼‰
â”‚   â””â”€â”€ hooks/                # é–‹ç™¼å·¥å…·æ–‡æª”
â”‚
â”œâ”€â”€ scripts/                  # Python ç¶­è­·å·¥å…·
â”‚
â”œâ”€â”€ zettelkasten/             # çŸ¥è­˜å¡ç‰‡ç³»çµ±
â”‚   â”œâ”€â”€ _meta/                # Meta ç³»çµ±ï¼ˆæ¨™ç±¤ã€åˆ†é¡å®šç¾©ï¼‰
â”‚   â””â”€â”€ {category}/           # å„åˆ†é¡å¡ç‰‡ï¼ˆnoun, verb-ru, grammar...ï¼‰
â”‚
â””â”€â”€ articles/                 # å­¸ç¿’æ–‡ç« å­˜æ”¾
```

### ç›®éŒ„åŠŸèƒ½èªªæ˜

| ç›®éŒ„ | åŠŸèƒ½ | ä¸»è¦å…§å®¹ |
|------|------|----------|
| `.claude/` | Claude Code é…ç½® | ä»£ç†äººã€å‘½ä»¤ã€æ¨¡æ¿ã€è¦ç¯„ |
| `.claude/agents/` | ä»£ç†äººå®šç¾© | card-structure-handler, build-card-content, build-card-links ç­‰è‡ªå‹•åŒ–æµç¨‹ |
| `.claude/commands/` | Slash Commands | /create-zettel, /analyze-article ç­‰æŒ‡ä»¤ |
| `doc/worklog/` | ç‰ˆæœ¬è¿½è¹¤ | å·¥ä½œæ—¥èªŒã€CSV å¡ç‰‡æ¸…å–®ã€éšæ®µå ±å‘Š |
| `doc/specs/` | ç‰ˆæœ¬è¦æ ¼ | v1.0.7-v1.1.0 é–‹ç™¼è¦æ ¼æ–‡æª” |
| `doc/hooks/` | é–‹ç™¼æŒ‡å— | Hook é–‹ç™¼ã€uv script æ¨¡å¼ |
| `doc/macos-dictionary-services.md` | å­—å…¸æŠ€è¡“æ–‡æª” | macOS DictionaryServices API æ•´åˆæŒ‡å— |
| `scripts/` | ç¶­è­·å·¥å…· | ç·¨è™Ÿç®¡ç†ã€ç´¢å¼•æ›´æ–°ã€é©—è­‰è…³æœ¬ã€å­—å…¸æŸ¥è©¢ |
| `zettelkasten/` | å¡ç‰‡ç³»çµ± | 433+ å¼µå­¸ç¿’å¡ç‰‡ï¼Œ27 å€‹åˆ†é¡ |
| `zettelkasten/_meta/` | Meta ç³»çµ± | æ¨™ç±¤å®šç¾©ã€åˆ†é¡ç´¢å¼• |
| `articles/` | æ–‡ç« å­˜æ”¾ | å¾…åˆ†æçš„æ—¥æ–‡å­¸ç¿’æ–‡ç«  |

---

## å…©ç¨®å¡ç‰‡å»ºç«‹å ´æ™¯

### å ´æ™¯ Aï¼šå¾æ–‡ç« æ‹†è§£
- **ä»£ç†äºº**ï¼š`/create-zettel`ï¼ˆSlash Commandï¼‰
- **è§¸ç™¼**ï¼šä½¿ç”¨è€…æä¾›æ—¥æ–‡æ–‡ç« 
- **æµç¨‹**ï¼šåˆ†æ â†’ è­˜åˆ¥ â†’ æ‰¹æ¬¡å»ºç«‹ 5-15 å¼µ
- **é©ç”¨**ï¼šå­¸ç¿’æ–°æ–‡ç« ã€æ‹“å±•æ–°é ˜åŸŸ

### å ´æ™¯ Bï¼šç³»çµ±éœ€æ±‚è£œå……
- **çµæ§‹ä»£ç†äºº**ï¼š`card-structure-handler`ï¼ˆ`.claude/agents/card-structure-handler.md`ï¼‰
- **å…§å®¹ä»£ç†äºº**ï¼š`build-card-content`ï¼ˆ`.claude/agents/build-card-content.md`ï¼‰
- **è§¸ç™¼**ï¼šå‰ä¸€ç‰ˆæœ¬çš„ Extension-Review å’Œ Linking éšæ®µè­˜åˆ¥ç¼ºå£
- **æµç¨‹**ï¼š
  1. æª¢è¦– `doc/worklog/extension-cards-{prev}.md` å’Œ `linking-cards-{prev}.md`
  2. ç¯©é¸ Critical/High å„ªå…ˆç´šå¡ç‰‡
  3. å»ºç«‹æœ¬ç‰ˆæœ¬å·¥ä½œæ¸…å–®ï¼ˆ`worklog-{version}.md`ï¼‰
  4. card-structure-handler å»ºç«‹å¡ç‰‡çµæ§‹ â†’ build-card-content å¡«å……å…§å®¹ â†’ å››éšæ®µå¾ªç’°
- **é©ç”¨**ï¼šç‰ˆæœ¬å¾ªç’° Draft éšæ®µ

---

## ç¶­è­·å·¥å…·

### å¡ç‰‡ç³»çµ±å·¥å…·

```bash
# 1. åˆ—å‡ºåˆ†é¡
uv run scripts/list-categories.py --count

# 2. åˆ—å‡ºå¯ç”¨ tags
uv run scripts/list-tags.py

# 3. å–å¾—ä¸‹ä¸€å€‹ç·¨è™Ÿï¼ˆæ”¯æ´ä¸¦ç™¼å’Œæ‰¹æ¬¡åˆ†é…ï¼‰
uv run scripts/get-next-number.py {category}              # å–®å€‹ç·¨è™Ÿ
uv run scripts/get-next-number.py {category} --batch 5    # æ‰¹æ¬¡åˆ†é… 5 å€‹ç·¨è™Ÿ

# 4. æ›´æ–°ç´¢å¼•ï¼ˆå¿…é ˆä½¿ç”¨ï¼‰
uv run scripts/update-index.py {category}

# 5. é©—è­‰ Meta ç³»çµ±
uv run scripts/verify-meta.py --verbose

# 6. æª¢æŸ¥ç·¨è™Ÿé€£çºŒæ€§
uv run scripts/fix-numbering.py --check

# 7. æª¢æŸ¥é€£çµæ ¼å¼ï¼ˆä¿®å¾©æ®˜ç•™çš„èˆŠ Wikilink æ ¼å¼ï¼‰
uv run scripts/fix-wikilinks.py --check

# 8. æŸ¥è©¢ macOS å­—å…¸ï¼ˆåƒ…é™ macOSï¼Œv1.0.10+ï¼‰
uv run scripts/lookup-dictionary.py é£Ÿã¹ã‚‹              # JSON æ ¼å¼è¼¸å‡º
uv run scripts/lookup-dictionary.py å‹‰å¼· --raw          # åŸå§‹å­—å…¸æ–‡å­—
```

### macOS å­—å…¸æ•´åˆï¼ˆv1.0.10+ï¼‰

ä½¿ç”¨ macOS å…§å»ºçš„ DictionaryServices API æŸ¥è©¢æ—¥æ–‡å­—å…¸ï¼Œæä¾›æ¬Šå¨çš„è®€éŸ³ã€è©æ€§å’Œå®šç¾©è³‡æ–™ã€‚

**æ”¯æ´çš„å­—å…¸**ï¼š
- **ã‚¹ãƒ¼ãƒ‘ãƒ¼å¤§è¾æ—**ï¼ˆä¸‰çœå ‚ï¼‰â†’ è®€éŸ³ã€è©æ€§ã€æ—¥æ–‡å®šç¾©
- **ã‚¦ã‚£ã‚ºãƒ€ãƒ å’Œè‹±è¾å…¸**ï¼ˆä¸‰çœå ‚ï¼‰â†’ è‹±æ–‡ç¿»è­¯

**æ•´åˆæµç¨‹**ï¼š
1. `card-structure-handler` å»ºç«‹å¡ç‰‡æ™‚æŸ¥è©¢å­—å…¸
2. å­—å…¸è³‡æ–™å­˜å…¥ YAML çš„ `dictionary` å€å¡Š
3. `build-card-content` ä½¿ç”¨å­—å…¸è³‡æ–™ä½œç‚ºæ¬Šå¨ä¾†æº

**è³‡æ–™åˆ†å·¥**ï¼š
| ä¾†æº | æä¾›çš„è³‡æ–™ |
|------|-----------|
| å­—å…¸ | è®€éŸ³ã€è©æ€§ã€æ—¥æ–‡å®šç¾©ã€è‹±æ–‡ç¿»è­¯ï¼ˆå¦‚æœ‰ï¼‰ |
| AI | ä¸­æ–‡ç¿»è­¯ã€æ“´å……è§£é‡‹ã€ä¾‹å¥è¨­è¨ˆã€å­¸ç¿’è¦é» |

**æŠ€è¡“æ–‡æª”**ï¼š`doc/macos-dictionary-services.md`

### ç·¨è™Ÿç®¡ç†å·¥å…·ï¼ˆv1.0.6+ï¼‰

```bash
# é å…ˆåˆ†é…ç·¨è™Ÿï¼ˆæ”¯æ´ä¸¦ç™¼å»ºç«‹å¡ç‰‡ï¼‰
uv run scripts/allocate_card_numbers.py                   # ç‚ºæ‰€æœ‰ pending å¡ç‰‡åˆ†é…ç·¨è™Ÿ
uv run scripts/allocate_card_numbers.py --limit 10        # åªåˆ†é…å‰ 10 å¼µ
uv run scripts/allocate_card_numbers.py --category noun   # åªåˆ†é…ç‰¹å®šåˆ†é¡
uv run scripts/allocate_card_numbers.py --dry-run         # ä¹¾è·‘æ¨¡å¼ï¼ˆä¸å¯¦éš›æ›´æ–°ï¼‰
```

**ç·¨è™Ÿåˆ†é…æµç¨‹**ï¼š

1. **å‚³çµ±æ–¹å¼**ï¼ˆåºåˆ—åŸ·è¡Œï¼‰ï¼š
   ```bash
   # ä»£ç†äººåœ¨å»ºç«‹å¡ç‰‡æ™‚å³æ™‚å‘¼å«
   uv run scripts/get-next-number.py concept
   # è¼¸å‡º: 025
   ```
   - âŒ ä¸æ”¯æ´ä¸¦ç™¼ï¼ˆæœƒç”¢ç”Ÿç·¨è™Ÿè¡çªï¼‰
   - âœ… é©åˆå–®å¼µå¡ç‰‡å»ºç«‹

2. **æ–°æ–¹å¼**ï¼ˆæ”¯æ´ä¸¦ç™¼ï¼‰ï¼š
   ```bash
   # æ­¥é©Ÿ 1ï¼šé å…ˆåˆ†é…ç·¨è™Ÿ
   uv run scripts/allocate_card_numbers.py --limit 10
   # è¼¸å‡º: ç‚º 10 å¼µå¡ç‰‡åˆ†é…ç·¨è™Ÿ 025-034

   # æ­¥é©Ÿ 2ï¼šæŸ¥çœ‹å·²åˆ†é…ç·¨è™Ÿçš„å¡ç‰‡
   uv run scripts/get_pending_cards.py --stage pending --limit 10
   # è¼¸å‡º: ID: 124 | #025âœ“ | concept | ...

   # æ­¥é©Ÿ 3ï¼šä¸¦ç™¼å»ºç«‹å¡ç‰‡ï¼ˆä»£ç†äººè®€å– allocated_numberï¼‰
   # å¤šå€‹ä»£ç†äººå¯åŒæ™‚åŸ·è¡Œï¼Œä¸æœƒè¡çª
   ```
   - âœ… æ”¯æ´ä¸¦ç™¼ï¼ˆä½¿ç”¨æª”æ¡ˆé–ï¼‰
   - âœ… é©åˆæ‰¹æ¬¡å»ºç«‹å¡ç‰‡

### CSV å·¥ä½œæ¸…å–®ç®¡ç†å·¥å…·ï¼ˆv1.0.6+ï¼‰

```bash
# 1. è®€å–å¾…è¾¦å¡ç‰‡æ¸…å–®ï¼ˆå»ºç«‹ Todoï¼‰
uv run scripts/get_pending_cards.py --stage pending --priority Critical --limit 10
uv run scripts/get_pending_cards.py --stage pending --format json  # JSON æ ¼å¼

# 2. æ–°å¢å¾…è¾¦å¡ç‰‡ï¼ˆExtension-Review ä»£ç†äººä½¿ç”¨ï¼‰
uv run scripts/add_pending_cards.py add --category noun --number 025 \
    --japanese èªå½™ --chinese è©å½™ --jlpt n4 --priority High

uv run scripts/add_pending_cards.py batch --from-json cards.json  # æ‰¹æ¬¡æ–°å¢

# 3. æ›´æ–°å¡ç‰‡é€²åº¦ï¼ˆbuild-card-content ä»£ç†äººä½¿ç”¨ï¼‰
uv run scripts/update_card_progress.py --id 59 --stage completed --quiet

# 4. æŸ¥è©¢çµ±è¨ˆèˆ‡é©—è­‰
uv run scripts/manage_worklog_cards.py stats
uv run scripts/manage_worklog_cards.py list --stage pending --priority Critical
uv run scripts/manage_worklog_cards.py validate
```

**è…³æœ¬ç”¨é€”èªªæ˜**ï¼š

| è…³æœ¬ | ç”¨é€” | ä¸»è¦ä½¿ç”¨è€… |
|------|------|-----------|
| `get_pending_cards.py` | è®€å–å¾…è¾¦å¡ç‰‡æ¸…å–® | ä¸»ç·šç¨‹ã€ä»£ç†äºº |
| `add_pending_cards.py` | æ–°å¢å¾…è¾¦å¡ç‰‡ | Extension-Review ä»£ç†äºº |
| `update_card_progress.py` | æ›´æ–°å¡ç‰‡é€²åº¦ | build-card-content ä»£ç†äºº |
| `manage_worklog_cards.py` | æŸ¥è©¢çµ±è¨ˆèˆ‡é©—è­‰ | äººå·¥æŸ¥è©¢ |
| `lookup-dictionary.py` | æŸ¥è©¢ macOS å­—å…¸ | card-structure-handler ä»£ç†äºº |

è©³ç´°ä½¿ç”¨èªªæ˜è«‹åƒè€ƒï¼š`doc/worklog/README-CSV.md`

---

## æ—¥æ–‡è¼¸å…¥ç·´ç¿’åŠŸèƒ½ï¼ˆv1.0.9+ï¼Œv2.0 é‡æ§‹ï¼‰

### åŠŸèƒ½æ¦‚è¿°

æ—¥æ–‡ç¾…é¦¬å­—è¼¸å…¥ç·´ç¿’ç³»çµ±ï¼Œä½æ–¼ `static/practice/` ç›®éŒ„ã€‚

v2.0 é‡æ§‹å¾Œæ¡ç”¨æ¨¡çµ„åŒ–æ¶æ§‹ï¼Œæ”¯æ´æ“´å±•æ–°çš„ç·´ç¿’æ¨¡å¼å’Œè¼¸å…¥æ–¹å¼ã€‚

### ç›®éŒ„çµæ§‹

```
src/                          # åŸå§‹ç¢¼ï¼ˆé–‹ç™¼æ™‚ç·¨è¼¯ï¼‰
â”œâ”€â”€ domain/                   # Domain å±¤ï¼ˆæ ¸å¿ƒé‚è¼¯ï¼Œä¸è®Šï¼‰
â”‚   â”œâ”€â”€ Character.js          # å­—å…ƒ Value Object
â”‚   â”œâ”€â”€ Question.js           # é¡Œç›® Entity
â”‚   â”œâ”€â”€ InputBuffer.js        # è¼¸å…¥ç·©è¡å€
â”‚   â”œâ”€â”€ TypingSession.js      # Session Aggregate Root
â”‚   â”œâ”€â”€ EventTypes.js         # äº‹ä»¶é¡å‹å¸¸æ•¸
â”‚   â””â”€â”€ RomajiMap.js          # ç¾…é¦¬å­—å°æ‡‰è¡¨
â”‚
â”œâ”€â”€ store/                    # ç‹€æ…‹ç®¡ç†ï¼ˆv2.0 æ–°å¢ï¼‰
â”‚   â”œâ”€â”€ index.js              # æ¨¡çµ„ç´¢å¼•
â”‚   â”œâ”€â”€ Store.js              # è¼•é‡ç´š Flux é¢¨æ ¼ Store
â”‚   â”œâ”€â”€ AppState.js           # æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹å®šç¾©
â”‚   â”œâ”€â”€ actions.js            # Action Types å’Œ Creators
â”‚   â”œâ”€â”€ reducer.js            # ç‹€æ…‹æ›´æ–°é‚è¼¯
â”‚   â””â”€â”€ middleware/           # ä¸­ä»‹å±¤ï¼ˆv2.1 æ–°å¢ï¼‰
â”‚       â”œâ”€â”€ index.js          # Middleware ç´¢å¼•
â”‚       â””â”€â”€ effectMiddleware.js # å‰¯ä½œç”¨è™•ç†ï¼ˆé–ƒçˆã€èªéŸ³ï¼‰
â”‚
â”œâ”€â”€ adapters/                 # æ©‹æ¥å™¨ï¼ˆv2.1 æ–°å¢ï¼‰
â”‚   â”œâ”€â”€ index.js              # Adapter ç´¢å¼•
â”‚   â””â”€â”€ SessionStoreAdapter.js # Session äº‹ä»¶ â†’ Store æ©‹æ¥
â”‚
â”œâ”€â”€ modes/                    # ç·´ç¿’æ¨¡å¼ï¼ˆv2.0 æ–°å¢ï¼‰
â”‚   â”œâ”€â”€ PracticeMode.js       # æŠ½è±¡åŸºé¡
â”‚   â”œâ”€â”€ QuestionMode.js       # é¡Œåº«æ¨¡å¼
â”‚   â”œâ”€â”€ KanaMode.js           # å‡åæ¨¡å¼
â”‚   â””â”€â”€ ModeRegistry.js       # æ¨¡å¼è¨»å†Šè¡¨
â”‚
â”œâ”€â”€ input/                    # è¼¸å…¥è™•ç†ï¼ˆv2.0 æ–°å¢ï¼‰
â”‚   â”œâ”€â”€ InputHandler.js       # æŠ½è±¡åŸºé¡
â”‚   â”œâ”€â”€ RomajiInputHandler.js # éµç›¤è¼¸å…¥ï¼ˆç¾…é¦¬å­—ï¼‰
â”‚   â”œâ”€â”€ DirectInputHandler.js # æ‰‹æ©Ÿè¼¸å…¥ï¼ˆæ—¥æ–‡ IMEï¼‰
â”‚   â””â”€â”€ InputHandlerFactory.js# å·¥å» æ¨¡å¼
â”‚
â”œâ”€â”€ renderers/                # æ¸²æŸ“å™¨ï¼ˆv2.0 æ–°å¢ï¼‰
â”‚   â”œâ”€â”€ TextRenderer.js       # é¡Œç›®æ–‡å­—æ¸²æŸ“
â”‚   â”œâ”€â”€ RomajiRenderer.js     # ç¾…é¦¬æ‹¼éŸ³æ¸²æŸ“
â”‚   â””â”€â”€ ResultRenderer.js     # çµæœé¡¯ç¤º
â”‚
â”œâ”€â”€ effects/                  # è¦–è¦ºæ•ˆæœï¼ˆv2.0 æ–°å¢ï¼‰
â”‚   â””â”€â”€ FlashEffect.js        # æˆåŠŸ/éŒ¯èª¤é–ƒçˆ
â”‚
â”œâ”€â”€ services/                 # æ‡‰ç”¨æœå‹™
â”‚   â”œâ”€â”€ SpeechService.js      # èªéŸ³åˆæˆæœå‹™
â”‚   â”œâ”€â”€ QuestionLoader.js     # é¡Œåº«è¼‰å…¥æœå‹™
â”‚   â””â”€â”€ PersistenceService.js # localStorage æŒä¹…åŒ–ï¼ˆv2.0 æ–°å¢ï¼‰
â”‚
â”œâ”€â”€ i18n/                     # åœ‹éš›åŒ–ï¼ˆv2.0 æ–°å¢ï¼‰
â”‚   â”œâ”€â”€ index.js              # i18n ç´¢å¼•
â”‚   â””â”€â”€ I18nService.js        # å¤šèªç³»æœå‹™ï¼ˆzh-TW, en, jaï¼‰
â”‚
â”œâ”€â”€ ui/                       # UI å±¤ï¼ˆä¿ç•™ï¼‰
â”‚   â””â”€â”€ KeyboardRenderer.js   # è™›æ“¬éµç›¤æ¸²æŸ“
â”‚
â”œâ”€â”€ App.js                    # æ‡‰ç”¨ä¸»æ§åˆ¶å™¨ï¼ˆv2.0 æ–°å¢ï¼‰
â””â”€â”€ main.js                   # å…¥å£é»ï¼ˆv2.0 ç°¡åŒ–ï¼‰

static/practice/              # éœæ…‹ç¶²é ï¼ˆHUGO ç™¼å¸ƒï¼‰
â”œâ”€â”€ index.html                # ç·´ç¿’é é¢
â”œâ”€â”€ style.css                 # æ¨£å¼
â””â”€â”€ js/
    â””â”€â”€ practice.js           # æ‰“åŒ…å¾Œçš„ JSï¼ˆç”± bun build ç”¢ç”Ÿï¼‰

tests/                        # æ¸¬è©¦æª”æ¡ˆï¼ˆ469 å€‹æ¸¬è©¦ï¼‰
â”œâ”€â”€ domain/                   # Domain å±¤æ¸¬è©¦
â”œâ”€â”€ integration/              # æ•´åˆæ¸¬è©¦ï¼ˆSession-Store æµç¨‹ï¼‰
â”œâ”€â”€ adapters/                 # Adapter æ¸¬è©¦
â”œâ”€â”€ ui/                       # UI æ¸¬è©¦
â”œâ”€â”€ store/                    # Store æ¸¬è©¦
â”‚   â””â”€â”€ middleware/           # Middleware æ¸¬è©¦
â”œâ”€â”€ modes/                    # Modes æ¸¬è©¦
â”œâ”€â”€ input/                    # Input æ¸¬è©¦
â”œâ”€â”€ i18n/                     # i18n æ¸¬è©¦
â””â”€â”€ renderers/                # Renderers æ¸¬è©¦
```

### æ¶æ§‹èªªæ˜ï¼ˆv2.1ï¼‰

| æ¨¡çµ„ | è·è²¬ | æ“´å±•æ–¹å¼ |
|------|------|----------|
| `store/` | é›†ä¸­ç®¡ç†æ‡‰ç”¨ç‹€æ…‹ | æ–°å¢ Action Types |
| `store/middleware/` | è™•ç†å‰¯ä½œç”¨ï¼ˆé–ƒçˆã€èªéŸ³ï¼‰ | æ–°å¢ middleware å‡½æ•¸ |
| `adapters/` | äº‹ä»¶ç³»çµ±æ©‹æ¥ | æ–°å¢ Adapter é¡åˆ¥ |
| `modes/` | ç·´ç¿’æ¨¡å¼æŠ½è±¡ | ç¹¼æ‰¿ PracticeModeï¼Œè¨»å†Šåˆ° ModeRegistry |
| `input/` | è¼¸å…¥è™•ç†æŠ½è±¡ | ç¹¼æ‰¿ InputHandlerï¼ŒåŠ å…¥ Factory |
| `renderers/` | UI æ¸²æŸ“åˆ†é›¢ | æ–°å¢ç¨ç«‹ Renderer |
| `i18n/` | åœ‹éš›åŒ–æ”¯æ´ | æ–°å¢ç¿»è­¯éµå€¼ |
| `App.js` | æ•´åˆæ‰€æœ‰æ¨¡çµ„ | çµ±ä¸€å…¥å£ |

### è³‡æ–™æµæ¶æ§‹ï¼ˆv2.1ï¼‰

```
ä½¿ç”¨è€…è¼¸å…¥ â†’ TypingSession â†’ SessionStoreAdapter â†’ Store
                                                     â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚           Subscribers              â”‚
                              â”‚  â”œâ”€ App.jsï¼ˆUI æ›´æ–°/æ¸²æŸ“ï¼‰          â”‚
                              â”‚  â””â”€ effectMiddlewareï¼ˆé–ƒçˆæ•ˆæœï¼‰    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é—œéµå…ƒä»¶**ï¼š
- **SessionStoreAdapter**ï¼šå°‡ Session äº‹ä»¶ï¼ˆKEY_PRESSED, CHARACTER_COMPLETED ç­‰ï¼‰è½‰ç™¼ç‚º Store actions
- **effectMiddleware**ï¼šè¨‚é–± Storeï¼Œè™•ç†å‰¯ä½œç”¨ï¼ˆé–ƒçˆæˆåŠŸ/éŒ¯èª¤ï¼‰
- **App.js**ï¼šè¨‚é–± Storeï¼Œè™•ç† UI æ›´æ–°ï¼ˆæ¸²æŸ“ã€Buffer é¡¯ç¤ºï¼‰

### é–‹ç™¼æµç¨‹

#### 1. å•Ÿå‹•æœ¬åœ°é–‹ç™¼ç’°å¢ƒ

ä½¿ç”¨ HUGO å•Ÿå‹•æœ¬åœ°ä¼ºæœå™¨ï¼š

```bash
hugo server
```

ç„¶å¾Œåœ¨ç€è¦½å™¨é–‹å•Ÿï¼š`http://localhost:1313/practice/`

#### 2. ä¿®æ”¹ç¨‹å¼ç¢¼

ç·¨è¼¯ `src/` ç›®éŒ„ä¸‹çš„åŸå§‹ç¢¼ã€‚

#### 3. åŸ·è¡Œæ¸¬è©¦

```bash
bun test                      # åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
bun test tests/domain         # åƒ…æ¸¬è©¦ Domain å±¤
bun test tests/integration    # åƒ…æ¸¬è©¦æ•´åˆæµç¨‹
```

#### 4. é‡æ–°æ‰“åŒ…ï¼ˆé‡è¦ï¼ï¼‰

**âš ï¸ ä¿®æ”¹ `src/` ç›®éŒ„å¾Œå¿…é ˆé‡æ–°æ‰“åŒ…ï¼Œå¦å‰‡è®Šæ›´ä¸æœƒç”Ÿæ•ˆï¼**

```bash
bun build src/main.js --outfile static/practice/js/practice.js --minify --format=iife
```

#### 5. æ¸¬è©¦æ‰“åŒ…çµæœ

é‡æ–°æ•´ç†ç€è¦½å™¨é é¢ï¼ˆå»ºè­°ä½¿ç”¨å¼·åˆ¶åˆ·æ–° `Cmd+Shift+R`ï¼‰é©—è­‰è®Šæ›´ã€‚

### æ‰“åŒ…æ ¼å¼æŠ€è¡“é¸å‹

**ç•¶å‰é¸æ“‡**ï¼š`--format=iife`ï¼ˆç«‹å³åŸ·è¡Œå‡½æ•¸è¡¨é”å¼ï¼‰

**èƒŒæ™¯**ï¼šv2.0 é‡æ§‹å¾Œæ¡ç”¨æ¨¡çµ„åŒ–é–‹ç™¼ï¼ˆ`src/*.js` ä½¿ç”¨ ES module èªæ³•ï¼‰ï¼Œéœ€è¦æ‰“åŒ…æˆç€è¦½å™¨å¯åŸ·è¡Œçš„å–®ä¸€æª”æ¡ˆã€‚

**å¯é¸æ–¹æ¡ˆæ¯”è¼ƒ**ï¼š

| æ–¹æ¡ˆ | åšæ³• | å„ªé» | ç¼ºé» |
|------|------|------|------|
| IIFE | `--format=iife` | å…¼å®¹æ€§æœ€å¥½ã€ç„¡ CORS é™åˆ¶ã€ä¸éœ€æ”¹ HTML | ç„¡æ³•ä½¿ç”¨ top-level await ç­‰ ESM ç‰¹æ€§ |
| ES Module | HTML åŠ  `type="module"` | æ”¯æ´ ESM ç‰¹æ€§ã€å¯å‹•æ…‹ import | èˆŠç€è¦½å™¨ä¸æ”¯æ´ã€æœ¬åœ°é–‹ç™¼éœ€ CORS |

**é¸æ“‡ IIFE çš„ç†ç”±**ï¼š
1. ç·´ç¿’åŠŸèƒ½ä¸éœ€è¦ ESM ç‰¹æ€§ï¼ˆå¦‚ top-level awaitã€å‹•æ…‹ importï¼‰
2. å…¼å®¹æ€§å„ªå…ˆï¼Œæ”¯æ´æ›´å¤šç€è¦½å™¨
3. é¿å…æœ¬åœ°é–‹ç™¼çš„ CORS å•é¡Œ
4. æ¸›å°‘è®Šå‹•é»ï¼ˆä¸éœ€ä¿®æ”¹ HTMLï¼‰

**æ—¥å¾Œè‹¥éœ€åˆ‡æ›ç‚º ESM**ï¼š
1. ç§»é™¤ `--format=iife` åƒæ•¸ï¼ˆbun build é è¨­è¼¸å‡º ESMï¼‰
2. ä¿®æ”¹ `static/practice/index.html`ï¼š
   ```html
   <script type="module" src="js/practice.js"></script>
   ```
3. æ³¨æ„ï¼šæœ¬åœ°é–‹ç™¼éœ€é€é HTTP serverï¼ˆå¦‚ `hugo server`ï¼‰å­˜å–ï¼Œä¸èƒ½ç›´æ¥é–‹å•Ÿ HTML æª”æ¡ˆ

### å¸¸è¦‹å•é¡Œ

| å•é¡Œ | åŸå›  | è§£æ±ºæ–¹æ¡ˆ |
|------|------|----------|
| ä¿®æ”¹å¾Œæ²’æœ‰æ•ˆæœ | æ²’æœ‰é‡æ–°æ‰“åŒ… | åŸ·è¡Œ `bun build` å‘½ä»¤ |
| ç€è¦½å™¨é¡¯ç¤ºèˆŠç‰ˆæœ¬ | ç€è¦½å™¨å¿«å– | å¼·åˆ¶åˆ·æ–° `Cmd+Shift+R` |
| æ¸¬è©¦é€šéä½†åŠŸèƒ½ç•°å¸¸ | æ‰“åŒ…ç‰ˆæœ¬èˆ‡åŸå§‹ç¢¼ä¸åŒæ­¥ | é‡æ–°æ‰“åŒ…å¾Œå†æ¸¬è©¦ |

### æ‰“åŒ…æé†’æ¸…å–®

ä¿®æ”¹ä»¥ä¸‹æª”æ¡ˆå¾Œ**å¿…é ˆé‡æ–°æ‰“åŒ…**ï¼š
- `src/domain/*.js` - æ ¸å¿ƒé‚è¼¯
- `src/store/*.js` - ç‹€æ…‹ç®¡ç†
- `src/store/middleware/*.js` - ä¸­ä»‹å±¤
- `src/adapters/*.js` - æ©‹æ¥å™¨
- `src/modes/*.js` - ç·´ç¿’æ¨¡å¼
- `src/input/*.js` - è¼¸å…¥è™•ç†
- `src/renderers/*.js` - æ¸²æŸ“å™¨
- `src/effects/*.js` - è¦–è¦ºæ•ˆæœ
- `src/services/*.js` - æ‡‰ç”¨æœå‹™
- `src/i18n/*.js` - åœ‹éš›åŒ–
- `src/ui/*.js` - UI æ§åˆ¶å™¨
- `src/App.js` - æ‡‰ç”¨ä¸»æ§åˆ¶å™¨
- `src/main.js` - å…¥å£é»

---

## é€£çµæ ¼å¼è¦ç¯„

**å”¯ä¸€æ­£ç¢ºæ ¼å¼**ï¼š`[text](path.md)`

**çµ•å°ç¦æ­¢**ï¼š`[[wikilink]]` æˆ– `[[path|text]]`

---

## é‡è¦æ–‡æª”

### è¦ç¯„æ–‡æª”
- `.claude/card-format-guidelines.md` - å¡ç‰‡æ ¼å¼è¦ç¯„
- `.claude/version-cycle-checklist.md` - ç‰ˆæœ¬å¾ªç’°æª¢æŸ¥æ¸…å–®

### åŸ·è¡Œæ–‡æª”
- `doc/execution-workflow.md` - åŸ·è¡Œæµç¨‹è©³ç´°æŒ‡å—
- `doc/worklog/worklog-{version}.md` - å„ç‰ˆæœ¬å·¥ä½œæ—¥èªŒ

### å·¥å…·æ–‡æª”
- `doc/hooks/03-uv-single-file-pattern.md` - ç¶­è­·å·¥å…·é–‹ç™¼æŒ‡å—

---

## Slash Commands

**æ–‡ç« åˆ†æç³»åˆ—**ï¼š
- `/analyze-article` - å…¨é¢åˆ†ææ–‡ç« 
- `/extract-vocab` - æå–é—œéµè©å½™
- `/explain-grammar` - æ·±å…¥è§£ææ–‡æ³•
- `/generate-exercises` - ç”Ÿæˆç·´ç¿’é¡Œ

**Zettelkasten ç³»åˆ—**ï¼š
- `/create-zettel` - å¾æ–‡ç« å»ºç«‹å¡ç‰‡

---

## è¡“èªè¡¨

ç‚ºç¢ºä¿æ–‡æª”ä¸€è‡´æ€§ï¼Œä»¥ä¸‹æ˜¯æœ¬å°ˆæ¡ˆçš„æ¨™æº–è¡“èªï¼š

### æ ¸å¿ƒæ¦‚å¿µ

| è¡“èª | è‹±æ–‡ | å®šç¾© | èªªæ˜ |
|------|------|------|------|
| **éšæ®µï¼ˆPhaseï¼‰** | Phase | å·¥ä½œæµç¨‹çš„æ­¥é©Ÿ | å››å€‹éšæ®µï¼šContent Creation, Extension Review, Link Building, Final Verification |
| **ç‹€æ…‹ï¼ˆStageï¼‰** | Stage | CSV ä¸­çš„æ¨™è¨˜ | äº”å€‹ç‹€æ…‹ï¼špending, draft, extension-review, linking, completed |
| **ç‹€æ…‹è½‰æ›** | Stage Transition | å¾ä¸€å€‹ç‹€æ…‹åˆ°å¦ä¸€å€‹ç‹€æ…‹ | å¿…é ˆéµå®ˆè½‰æ›è¦å‰‡ï¼Œä¸å¯è·³éä¸­é–“ç‹€æ…‹ |

### éšæ®µèˆ‡ç‹€æ…‹å°æ‡‰

| éšæ®µåç¨± | èµ·å§‹ç‹€æ…‹ | çµæŸç‹€æ…‹ | èªªæ˜ |
|---------|---------|---------|------|
| éšæ®µ 1: Content Creation | `pending` | `draft` | å»ºç«‹å¡ç‰‡å…§å®¹ï¼ˆä¸‰èªè§£é‡‹ã€ä¾‹å¥ï¼‰ |
| éšæ®µ 2: Extension Review | `draft` | `extension-review` | æª¢æŸ¥ä¸¦è¨˜éŒ„å»¶ä¼¸éœ€æ±‚ |
| éšæ®µ 3: Link Building | `extension-review` | `linking` | å»ºç«‹æ¨™æº–é€£çµå’Œè…³è¨» |
| éšæ®µ 4: Final Verification | `linking` | `completed` | é©—è­‰ä¸¦ç™¼å¸ƒ |

### äº”å€‹ç‹€æ…‹çš„å«ç¾©

| ç‹€æ…‹ | ä¸­æ–‡ | å«ç¾© |
|------|------|------|
| `pending` | å¾…è™•ç† | å¡ç‰‡éœ€æ±‚å·²è­˜åˆ¥ï¼Œå°šæœªé–‹å§‹å»ºç«‹å…§å®¹ |
| `draft` | è‰ç¨¿ | å¡ç‰‡å…§å®¹å·²å»ºç«‹ï¼Œç­‰å¾…å¯©æŸ¥å»¶ä¼¸éœ€æ±‚ |
| `extension-review` | å»¶ä¼¸å¯©æŸ¥ | å»¶ä¼¸éœ€æ±‚å·²å¯©æŸ¥ï¼Œç­‰å¾…å»ºç«‹é€£çµ |
| `linking` | é€£çµä¸­ | é€£çµå·²å»ºç«‹ï¼Œç­‰å¾…æœ€çµ‚é©—è­‰ |
| `completed` | å·²å®Œæˆ | å¡ç‰‡å·²å®Œæˆæ‰€æœ‰éšæ®µï¼Œå¯ç™¼å¸ƒ |

### æ–‡ä»¶èˆ‡å ±å‘Š

| è¡“èª | æ¨™æº–åç¨± | æ–‡ä»¶è·¯å¾‘æ ¼å¼ | èªªæ˜ |
|------|---------|------------|------|
| Extension-Review å ±å‘Š | å»¶ä¼¸éœ€æ±‚å ±å‘Š | `doc/worklog/extension-cards-{version}.md` | Extension Review éšæ®µç”¢å‡ºï¼Œè¨˜éŒ„å¾ draft å¡ç‰‡è­˜åˆ¥çš„å»¶ä¼¸éœ€æ±‚ |
| Linking å ±å‘Š | é€£çµéšæ®µéœ€æ±‚å ±å‘Š | `doc/worklog/linking-cards-{version}.md` | Link Building éšæ®µç”¢å‡ºï¼Œè¨˜éŒ„å»ºç«‹é€£çµæ™‚ç™¼ç¾çš„ç¼ºå£å’Œè‰ç¨¿å¡ç‰‡ |
| å·¥ä½œæ—¥èªŒ | ç‰ˆæœ¬å·¥ä½œæ—¥èªŒ | `doc/worklog/worklog-{version}.md` | è¨˜éŒ„æ•´å€‹ç‰ˆæœ¬çš„é€²åº¦ã€å¡ç‰‡æ¸…å–®ã€éšæ®µç‹€æ…‹ |
| ç‰ˆæœ¬ä¾è³´ | ç‰ˆæœ¬é–“ä¾è³´é—œä¿‚ | - | v{X} çš„å»¶ä¼¸éœ€æ±‚å ±å‘Š â†’ v{X+1} çš„è¼¸å…¥ä¾†æº |
| ç‰ˆæœ¬è¦åŠƒ | Content Creation å‰ç½®æ­¥é©Ÿ | - | éšæ®µ 1 å‰çš„æº–å‚™å·¥ä½œï¼Œæª¢è¦–å‰ç‰ˆæœ¬å ±å‘Šä¸¦å»ºç«‹å·¥ä½œæ¸…å–® |
| ä»£ç†äºº | Agent | `.claude/agents/*.md` | å°ˆé–€è™•ç†ç‰¹å®šä»»å‹™çš„è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ï¼ˆå¦‚ card-structure-handler, build-card-contentï¼‰ |

**ä½¿ç”¨åŸå‰‡**ï¼š
- æ–‡æª”ä¸­æ‡‰ä½¿ç”¨æ¨™æº–åç¨±ï¼Œé¿å…æ··ç”¨åŒç¾©è©
- **éšæ®µï¼ˆPhaseï¼‰** èˆ‡ **ç‹€æ…‹ï¼ˆStageï¼‰** æ˜¯ä¸åŒå±¤æ¬¡çš„æ¦‚å¿µï¼Œä¸å¯æ··æ·†
- å®Œæˆã€Œéšæ®µ 1: Content Creationã€å¾Œï¼Œç‹€æ…‹è®Šç‚º `draft`ï¼ˆä¸æ˜¯ `extension-review`ï¼‰
- æ–‡ä»¶è·¯å¾‘å¿…é ˆä½¿ç”¨æ¨™æº–æ ¼å¼ï¼Œç¢ºä¿ç‰ˆæœ¬è™Ÿä¸€è‡´æ€§
- ç‰ˆæœ¬è™Ÿæ ¼å¼ï¼š`{version}` è¡¨ç¤ºç•¶å‰ç‰ˆæœ¬ï¼Œ`{prev}` è¡¨ç¤ºå‰ä¸€ç‰ˆæœ¬

---

**æœ€å¾Œæ›´æ–°ï¼š2025-12-22**
