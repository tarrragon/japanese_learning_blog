# 檔案開頭註解標準

## 設計意義

檔案開頭註解說明這個檔案「為什麼存在」和「做什麼」，幫助開發者快速理解檔案的定位。

## 必須包含（兩欄位）

### 1. 設計目的（Design Purpose）

說明這個檔案解決什麼問題。

**要求**：
- 一句話說明「為什麼需要這個檔案」
- 聚焦於解決的問題，而非實作方式
- 不隨程式修改而改變（除非重構）

### 2. 職責（Responsibility）

說明這個檔案做什麼。

**要求**：
- 列出主要職責（1-3 項）
- 說明「做什麼」而非「怎麼做」
- 幫助判斷某個功能是否應該放在這個檔案

---

## 禁止包含

| 禁止內容 | 原因 | 替代方案 |
|---------|------|---------|
| 作者、日期 | 由 git 管理 | `git blame` |
| 版本號 | 由 git 管理 | `git log` |
| 冗長的使用範例 | 會過時 | 單元測試 |
| 實作細節描述 | 程式碼本身就是描述 | 行內註解 |
| TODO/FIXME 清單 | 應該使用 issue tracker | GitHub Issues |

---

## JavaScript 格式

```javascript
/**
 * @file {檔案名稱}
 * @description
 *   設計目的：{一句話說明為什麼需要這個檔案}
 *   職責：
 *     - {職責 1}
 *     - {職責 2}
 */
```

**範例**：
```javascript
/**
 * @file TypingSession.js
 * @description
 *   設計目的：協調打字練習的完整生命週期，作為 Domain 層的 Aggregate Root
 *   職責：
 *     - 管理題目佇列和當前題目狀態
 *     - 處理使用者輸入並發送領域事件
 *     - 維護練習統計（正確率、完成數）
 */
```

---

## Python 格式

```python
"""
{檔案名稱}

設計目的：{一句話說明為什麼需要這個檔案}

職責：
  - {職責 1}
  - {職責 2}
"""
```

**範例**：
```python
"""
update_card_progress.py

設計目的：追蹤卡片在四階段工作流程中的狀態轉換

職責：
  - 驗證狀態轉換的合法性（不允許跳躍）
  - 更新 CSV 工作清單中的卡片狀態
  - 輸出狀態變更的確認訊息
"""
```

---

## 何時需要更新註解

| 情況 | 是否需要更新 | 說明 |
|------|-------------|------|
| 修復 bug | 否 | 設計目的不變 |
| 新增功能（在原有職責範圍內） | 否 | 職責不變 |
| 新增功能（超出原有職責） | 是 | 需要更新職責 |
| 重構（拆分檔案） | 是 | 需要重新定義 |
| 重構（合併檔案） | 是 | 需要重新定義 |
| 改變檔案的核心用途 | 是 | 需要重新定義 |

---

## 範例比較

**不好的註解**（太詳細、會過時）：
```javascript
/**
 * @file TypingSession.js
 * @author John Doe
 * @version 2.1.0
 * @created 2024-01-15
 * @description
 *   這個檔案實現了打字練習的核心邏輯。
 *   使用方式：
 *     const session = new TypingSession(questions);
 *     session.start();
 *     session.handleKey('a');
 *
 *   內部使用 EventEmitter 來發送事件...
 *
 *   TODO: 支援多語言
 *   FIXME: 效能優化
 */
```

**好的註解**（簡潔、穩定）：
```javascript
/**
 * @file TypingSession.js
 * @description
 *   設計目的：協調打字練習的完整生命週期，作為 Domain 層的 Aggregate Root
 *   職責：
 *     - 管理題目佇列和當前題目狀態
 *     - 處理使用者輸入並發送領域事件
 *     - 維護練習統計
 */
```
